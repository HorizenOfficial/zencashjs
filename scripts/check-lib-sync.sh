#!/usr/bin/env bash

diff_in_dir() {
  DIFF=$(git diff --name-only origin/master "$1")
  echo
  echo ----------------------------------------------------------------------------------------------------------------
  echo "dir '$1'":
  echo "diff: $DIFF"
  echo ----------------------------------------------------------------------------------------------------------------

  for FILE in $DIFF; do
    basename $FILE
  done
}

echo Checking if ./lib is in sync with ./src...
SRC_DIFF=$(diff_in_dir src)
LIB_DIFF=$(diff_in_dir lib)

[[ "$SRC_DIFF" == "$LIB_DIFF" ]] && exit 0
echo ----------------------------------------------------------------------------------------------------------------
echo "basenamed for src: $SRC_DIFF"
echo ----------------------------------------------------------------------------------------------------------------
echo "basenamed for lib: $LIB_DIFF"
echo ----------------------------------------------------------------------------------------------------------------
exit 1
